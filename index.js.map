{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/api.js","../src/js/artists.js","../src/js/feedback.js","../src/js/modal.js","../src/js/mobile-menu.js"],"sourcesContent":["export const createArtistsCartTemplate = ({\n  _id: id,\n  strArtist: name,\n  strArtistThumb: photo,\n  genres: genres,\n  strBiographyEN: shortInfo,\n}) => {\n  return `\n<li class=\"artist-card\">\n  <img src=\"${photo}\" alt=\"${name}\" class=\"artist-photo\" />\n  <ul class=\"artist-genres\">\n    ${genres.map(genre => `<li class=\"genre-tag\">${genre}</li>`).join('')}\n  </ul>\n  <h3 class=\"artist-name\">${name}</h3>\n  <p class=\"artist-info\">${shortInfo}</p>\n <button class=\"learn-more-btn\" data-artist-id=\"${id}\">Learn More</button>\n</li>\n`;\n};\n\nexport function renderArtists(artists, container) {\n  if (!artists || !artists.length) return;\n\n  const markup = artists\n    .map(artist => createArtistsCartTemplate(artist))\n    .join('');\n  container.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoadMoreButton(button) {\n  button.classList.remove('hidden');\n}\nexport function hideLoadMoreButton(button) {\n  button.classList.add('hidden');\n}\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api/';\n\nexport async function fetchArtists(page, limit) {\n  try {\n    const response = await axios.get('/artists', {\n      params: {\n        limit,\n        page,\n      },\n    });\n    return response.data; // повертаємо повний об'єкт\n  } catch (err) {\n    console.error(err);\n    return { artists: [], totalArtists: 0 }; // щоб не поламати цикл\n  }\n}\n","import {\n  createArtistsCartTemplate,\n  renderArtists,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './render-function';\nimport { fetchArtists } from './api.js';\nimport iziToast from 'izitoast';\n\nconst IMAGES_PER_PAGE = 8;\nlet currentPage = 1;\n\nconst refs = {\n  cardsContainer: document.querySelector('#cards-container'),\n  loadMoreBtn: document.querySelector('.loadMoreBtn'),\n};\n\nasync function init() {\n  const { artists, totalArtists } = await fetchArtists(\n    currentPage,\n    IMAGES_PER_PAGE\n  );\n  renderArtists(artists, refs.cardsContainer);\n\n  const artistsLoaded = currentPage * IMAGES_PER_PAGE;\n  if (artistsLoaded < totalArtists) {\n    showLoadMoreButton(refs.loadMoreBtn);\n  } else {\n    hideLoadMoreButton(refs.loadMoreBtn);\n  }\n}\n\ninit();\n\nasync function onLoadMoreBtn() {\n  currentPage++;\n  try {\n    const { artists, totalArtists, page } = await fetchArtists(\n      currentPage,\n      IMAGES_PER_PAGE\n    );\n\n    renderArtists(artists, refs.cardsContainer);\n    //---End of collection\n    const totalPages = Math.ceil(totalArtists / IMAGES_PER_PAGE);\n\n    if (currentPage >= totalPages) {\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 4000,\n        titleColor: '#fff',\n        backgroundColor: ' #09f',\n        messageColor: '#fff',\n      });\n      hideLoadMoreButton(refs.loadMoreBtn);\n      refs.loadMoreBtn.removeEventListener('click', onLoadMoreBtn);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtn);\n","import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\nimport Raty from 'raty-js'; \n\nlet swiperInstance;\n\nasync function fetchFeedbacks() {\n    const response = await fetch('https://sound-wave.b.goit.study/api/feedbacks');\n    if (!response.ok) {\n        throw new Error('Помилка завантаження');\n    }\n\n    const data = await response.json();\n    console.log('Отримані відгуки:', data);\n    return data.data;\n}\n\nfunction renderSlides(feedbacks) {\n    const wrapper = document.getElementById('feedback-list');\n    wrapper.innerHTML = '';\n\n    feedbacks.forEach(({ id, name, descr, rating }) => {\n        const slide = document.createElement('div');\n        slide.classList.add('swiper-slide');\n        slide.dataset.id = id;\n\n        slide.innerHTML = `\n        <div class=\"feedback-card\">\n            <h4>${name}</h4>\n            <p>${descr}</p>\n            <div class=\"star-rating\" data-rating=\"${Math.round(rating)}\"></div>\n        </div>`;\n\n        wrapper.appendChild(slide);\n    });\n}\n\nfunction initStarRatings() {\n    const starContainers = document.querySelectorAll('.star-rating');\n    starContainers.forEach(container => {\n        const rating = parseInt(container.dataset.rating, 10);\n        Raty({\n            element: container,\n            readOnly: true,\n            score: rating,\n            starType: 'svg',\n            starSize: 20,\n            hints: [],\n        });\n    });\n}\n\nfunction updatePagination(activeIndex, slidesCount) {\n    const firstBtn = document.getElementById('pagination-first');\n    const middleBtn = document.getElementById('pagination-middle');\n    const lastBtn = document.getElementById('pagination-last');\n\n    firstBtn.classList.remove('active');\n    middleBtn.classList.remove('active');\n    lastBtn.classList.remove('active');\n\n    if (activeIndex === 0) {\n        firstBtn.classList.add('active');\n    } else if (activeIndex === slidesCount - 1) {\n        lastBtn.classList.add('active');\n    } else {\n        middleBtn.classList.add('active');\n    }\n}\n\nfunction initSwiper(slidesCount) {\n    if (swiperInstance) {\n        swiperInstance.destroy(true, true);\n    }\n\n    swiperInstance = new Swiper('.feedback-swiper', {\n        navigation: {\n            nextEl: '.swiper-button-next',\n            prevEl: '.swiper-button-prev',\n        },\n        slidesPerView: 1,\n        spaceBetween: 20,\n        loop: false,\n    });\n\n    swiperInstance.on('slideChange', () => {\n        updatePagination(swiperInstance.activeIndex, slidesCount);\n    });\n\n    updatePagination(swiperInstance.activeIndex, slidesCount);\n\n    document.getElementById('pagination-first').onclick = () => swiperInstance.slideTo(0);\n    document.getElementById('pagination-last').onclick = () => swiperInstance.slideTo(slidesCount - 1);\n    document.getElementById('pagination-middle').onclick = () => {\n        if (slidesCount > 2) {\n            swiperInstance.slideTo(1);\n        }\n    };\n    initStarRatings();\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    fetchFeedbacks()\n        .then(feedbacks => {\n            renderSlides(feedbacks);\n            initSwiper(feedbacks.length);\n        })\n        .catch(err => console.error(err));\n});\n","// import 'izitoast/dist/css/iziToast.min.css';\n// підвантаження даних//\nconst modalBackdrop = document.getElementById('artist-modal');\nconst modalContent = modalBackdrop.querySelector('.modal-content');\nconst closeModalBtn = modalBackdrop.querySelector('.close-btn');\n\nexport async function openArtistModal(artistId) {\n  try {\n    document.body.classList.add('no-scroll');\n    modalBackdrop.classList.remove('is-hidden');\n    modalContent.innerHTML = '<span class=\"loader\">Loading...</span>';\n\n    const response = await fetch(\n      `https://sound-wave.b.goit.study/api/artists/${artistId}`\n    );\n    if (!response.ok) throw new Error('Failed to fetch artist details');\n    const data = await response.json();\n\n    modalContent.innerHTML = generateArtistMarkup(data);\n  } catch (err) {\n    modalContent.innerHTML = '<p>Error loading artist data.</p>';\n  }\n}\n\nfunction closeArtistModal() {\n  modalBackdrop.classList.add('is-hidden');\n  document.body.classList.remove('no-scroll');\n  modalContent.innerHTML = '';\n}\n\ncloseModalBtn.addEventListener('click', closeArtistModal);\nmodalBackdrop.addEventListener('click', e => {\n  if (e.target === modalBackdrop) closeArtistModal();\n});\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') closeArtistModal();\n});\n\n// відкриття модалки//\ndocument.querySelector('.gallery').addEventListener('click', e => {\n  if (e.target.closest('.learn-more-btn')) {\n    const card = e.target.closest('.artist-card');\n    const artistId = card.dataset.id;\n    openArtistModal(artistId);\n  }\n});\n","\ndocument.addEventListener('DOMContentLoaded', function () {\n  const burger = document.querySelector('.burger-btn');\n  const modalMenu = document.querySelector('.mobile-menu');\n  const closeBtn = document.querySelector('.mobile-close');\n  const backdrop = document.querySelector('.mobile-backdrop');\n  const headerLogo = document.querySelector('.header-logo-link');\n\n  let logoCloned = false;\n\n  const closeMenu = () => {\n    backdrop.classList.remove('open');\n    modalMenu.classList.remove('open');\n    document.body.style.overflow = '';\n  };\n\n  burger.addEventListener('click', () => {\n    backdrop.classList.add('open');\n    modalMenu.classList.add('open');\n    document.body.style.overflow = 'hidden';\n\n    if (!logoCloned && headerLogo) {\n      const logoClone = headerLogo.cloneNode(true);\n      logoClone.classList.add('mobile-logo');\n      modalMenu.prepend(logoClone);\n      logoCloned = true;\n    }\n  });\n\n  closeBtn.addEventListener('click', closeMenu);\n\n  backdrop.addEventListener('click', e => {\n    if (e.target === backdrop) closeMenu();\n  });\n\n  const mobileLinks = modalMenu.querySelectorAll('a');\n  mobileLinks.forEach(link => {\n    link.addEventListener('click', closeMenu);\n  });\n});"],"names":["createArtistsCartTemplate","id","name","photo","genres","shortInfo","genre","renderArtists","artists","container","markup","artist","showLoadMoreButton","button","hideLoadMoreButton","axios","fetchArtists","page","limit","err","IMAGES_PER_PAGE","currentPage","refs","init","totalArtists","onLoadMoreBtn","totalPages","iziToast","swiperInstance","fetchFeedbacks","response","data","renderSlides","feedbacks","wrapper","descr","rating","slide","initStarRatings","Raty","updatePagination","activeIndex","slidesCount","firstBtn","middleBtn","lastBtn","initSwiper","Swiper","modalBackdrop","modalContent","closeModalBtn","openArtistModal","artistId","closeArtistModal","burger","modalMenu","closeBtn","backdrop","headerLogo","logoCloned","closeMenu","logoClone","e","link"],"mappings":"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"}