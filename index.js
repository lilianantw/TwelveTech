import{a as h,i as M,S as B,R as k}from"./assets/vendor-CsQmPkTk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const y=document.querySelector(".loader-container"),C=({_id:e="",strArtist:t="No name",strArtistThumb:n="https://via.placeholder.com/300x300?text=No+Image",genres:r=[],strBiographyEN:o="No description."})=>{const s=r.length?r.map(f=>`<li class="genre-tag">${f}</li>`).join(""):'<li class="genre-tag">No genres</li>',i=o.slice(0,150)+(o.length>150?"...":"");return`
    <li class="artist-card">
      <img src="${n}" alt="${t}" class="artist-photo" loading="lazy" />
      <ul class="artist-genres">${s}</ul>
      <h3 class="artist-name">${t}</h3>
      <p class="artist-info">${i}</p>
      <button class="learn-more-btn" data-artist-id="${e}">Learn More</button>
    </li>
  `};function L(e,t){if(!Array.isArray(e)||!e.length)return;const n=e.map(r=>C(r)).join("");t.insertAdjacentHTML("beforeend",n)}function S(e){e.classList.remove("hidden")}function v(e){e.classList.add("hidden")}function b(){y.classList.remove("hidden")}function w(){y.classList.add("hidden")}const I="https://sound-wave.b.goit.study/api/",u=8;h.defaults.baseURL=I;async function m(e=1,t=u){try{const n=await h.get("/artists",{params:{page:e,limit:t}});return console.log("Fetch returned:",n.data),n.data}catch(n){return console.error("Failed to fetch artists:",n),{artists:[],totalArtists:0}}}m().then(e=>console.log(e));let d=1;const a={cardsContainer:document.querySelector("#cards-container"),loadMoreBtn:document.querySelector(".load-more-btn")};async function A(){try{b();const{artists:e,totalArtists:t}=await m(d,u);L(e,a.cardsContainer),d*u<t?S(a.loadMoreBtn):v(a.loadMoreBtn)}catch(e){console.error(e)}finally{w()}}async function E(){d++,b();try{const{artists:e,totalArtists:t}=await m(d,u);L(e,a.cardsContainer);const n=a.cardsContainer.lastElementChild;await new Promise(s=>setTimeout(s,100));const r=n.getBoundingClientRect().height;window.scrollBy({top:r*1,behavior:"smooth"});const o=Math.ceil(t/u);d>=o&&(M.info({title:"",message:"Вы просмотрели всех артистов.",position:"topRight",timeout:4e3,titleColor:"#fff",backgroundColor:"#764191",messageColor:"#fff"}),v(a.loadMoreBtn),a.loadMoreBtn.removeEventListener("click",E))}catch(e){console.error(e)}finally{w()}}function q(e){const t=e.target.closest(".learn-more-btn");!t||t.dataset.artistId}document.addEventListener("DOMContentLoaded",A);a.loadMoreBtn.addEventListener("click",E);a.cardsContainer.addEventListener("click",q);let l;async function T(){try{const e=await fetch("https://sound-wave.b.goit.study/api/feedbacks");if(!e.ok)throw new Error("Ошибка загрузки данных");const t=await e.json();return console.log("Полученные отзывы:",t),t.data}catch(e){throw console.error("Ошибка при получении отзывов:",e),e}}function x(e){const t=document.getElementById("feedback-list");if(!t){console.error("Элемент #feedback-list не найден");return}t.innerHTML="",e.forEach(({id:n,name:r,descr:o,rating:s})=>{const i=document.createElement("div");i.classList.add("swiper-slide"),i.dataset.id=n,i.innerHTML=`
      <div class="feedback-card">
        <h4>${r}</h4>
        <p>${o}</p>
        <div class="star-rating" data-rating="${Math.round(s)||0}"></div>
      </div>`,t.appendChild(i)})}function g(){const e=document.querySelectorAll(".star-rating");console.log("Найдено star-rating элементов:",e.length),e.forEach(t=>{const n=parseInt(t.dataset.rating,10)||0;console.log("Рейтинг для элемента:",n),new k(t,{readOnly:!0,score:n,starType:"svg",starSize:20,hints:[],callbacks:{initialized:()=>{console.log("Raty инициализирован для контейнера:",t),console.log("SVG элементы:",t.querySelectorAll("svg").length)}}})})}function p(e,t){const n=document.getElementById("pagination-first"),r=document.getElementById("pagination-middle"),o=document.getElementById("pagination-last");if(!n||!r||!o){console.error("Один или несколько элементов пагинации не найдены");return}n.classList.remove("active"),r.classList.remove("active"),o.classList.remove("active"),e===0?n.classList.add("active"):e===t-1?o.classList.add("active"):r.classList.add("active")}function O(e){if(l&&l.destroy(!0,!0),!document.querySelector(".feedback-swiper")){console.error("Контейнер .feedback-swiper не найден");return}l=new B(".feedback-swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,spaceBetween:20,loop:!1,on:{init:function(){console.log("Swiper инициализирован, activeIndex:",this.activeIndex),g(),p(this.activeIndex,e)},slideChange:function(){console.log("Слайд изменён, activeIndex:",this.activeIndex),g(),p(this.activeIndex,e)}}});const n=document.getElementById("pagination-first"),r=document.getElementById("pagination-middle"),o=document.getElementById("pagination-last");if(!n||!r||!o){console.error("Один или несколько элементов пагинации не найдены");return}n.onclick=()=>{console.log("Переход к первому слайду"),l.slideTo(0)},r.onclick=()=>{e>2&&(console.log("Переход к среднему слайду"),l.slideTo(1))},o.onclick=()=>{console.log("Переход к последнему слайду"),l.slideTo(e-1)}}document.addEventListener("DOMContentLoaded",()=>{T().then(e=>{x(e),O(e.length)}).catch(e=>console.error("Ошибка инициализации:",e))});document.addEventListener("DOMContentLoaded",()=>{var o;const e=document.getElementById("artist-modal");if(!e)return;const t=e.querySelector(".modal-content"),n=e.querySelector(".close-btn");if(!t||!n)return;function r(){e.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),t.innerHTML=""}n.addEventListener("click",r),e.addEventListener("click",s=>{s.target===e&&r()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&r()}),(o=document.querySelector(".gallery"))==null||o.addEventListener("click",s=>{if(s.target.closest(".learn-more-btn")){const f=s.target.closest(".artist-card").dataset.id;$(f)}})});async function $(e){const t=document.getElementById("artist-modal"),n=t==null?void 0:t.querySelector(".modal-content");if(!(!t||!n))try{document.body.classList.add("no-scroll"),t.classList.remove("is-hidden"),n.innerHTML='<span class="loader">Loading...</span>';const r=await fetch(`https://sound-wave.b.goit.study/api/artists/${e}`);if(!r.ok)throw new Error("Failed to fetch artist details");const o=await r.json();n.innerHTML=generateArtistMarkup(o)}catch{n.innerHTML="<p>Error loading artist data.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".burger-btn"),t=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-close"),r=document.querySelector(".mobile-backdrop"),o=document.querySelector(".header-logo-link");let s=!1;const i=()=>{r.classList.remove("open"),t.classList.remove("open"),document.body.style.overflow=""};e.addEventListener("click",()=>{if(r.classList.add("open"),t.classList.add("open"),document.body.style.overflow="hidden",!s&&o){const c=o.cloneNode(!0);c.classList.add("mobile-logo"),t.prepend(c),s=!0}}),n.addEventListener("click",i),r.addEventListener("click",c=>{c.target===r&&i()}),t.querySelectorAll("a").forEach(c=>{c.addEventListener("click",i)})});
//# sourceMappingURL=index.js.map
