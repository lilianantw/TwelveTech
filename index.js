import{a as p,i as B,S as M,R as k}from"./assets/vendor-CsQmPkTk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const S=({_id:e,strArtist:t,strArtistThumb:n,genres:s,strBiographyEN:o})=>`
<li class="artist-card">
  <img src="${n}" alt="${t}" class="artist-photo" />
  <ul class="artist-genres">
    ${s.map(r=>`<li class="genre-tag">${r}</li>`).join("")}
  </ul>
  <h3 class="artist-name">${t}</h3>
  <p class="artist-info">${o}</p>
 <button class="learn-more-btn" data-artist-id="${e}">Learn More</button>
</li>
`,h=document.querySelector(".loader-container");function y(e,t){if(!e||!e.length)return;const n=e.map(s=>S(s)).join("");t.insertAdjacentHTML("beforeend",n)}function C(e){e.classList.remove("hidden")}function L(e){e.classList.add("hidden")}function v(){h.classList.remove("hidden")}function b(){h.classList.add("hidden")}p.defaults.baseURL="https://sound-wave.b.goit.study/api/";async function w(e,t){try{return(await p.get("/artists",{params:{limit:t,page:e}})).data}catch(n){return console.error(n),{artists:[],totalArtists:0}}}const u=8;let l=1;const a={cardsContainer:document.querySelector("#cards-container"),loadMoreBtn:document.querySelector(".loadMoreBtn")};async function I(){try{v();const{artists:e,totalArtists:t}=await w(l,u);y(e,a.cardsContainer),l*u<t?C(a.loadMoreBtn):L(a.loadMoreBtn)}catch(e){console.log(e)}finally{b()}}I();async function E(){l++,v();try{const{artists:e,totalArtists:t,page:n}=await w(l,u);y(e,a.cardsContainer);const s=a.cardsContainer.lastElementChild;await new Promise(i=>setTimeout(i,100));const o=s.getBoundingClientRect().height;window.scrollBy({top:o*1,behavior:"smooth"});const r=Math.ceil(t/u);l>=r&&(B.info({title:"",message:"We're sorry, but you've reached the end of search results.",position:"topRight",timeout:4e3,titleColor:"#fff",backgroundColor:" #09f",messageColor:"#fff"}),L(a.loadMoreBtn),a.loadMoreBtn.removeEventListener("click",E))}catch(e){console.log(e)}finally{b()}}function A(e){const t=e.target.closest(".learn-more-btn");!t||t.dataset.artistId}a.loadMoreBtn.addEventListener("click",E);a.cardsContainer.addEventListener("click",A);let d;async function q(){const e=await fetch("https://sound-wave.b.goit.study/api/feedbacks");if(!e.ok)throw new Error("Помилка завантаження");const t=await e.json();return console.log("Отримані відгуки:",t),t.data}function T(e){const t=document.getElementById("feedback-list");if(!t){console.error("Элемент #feedback-list не найден");return}t.innerHTML="",e.forEach(({id:n,name:s,descr:o,rating:r})=>{const i=document.createElement("div");i.classList.add("swiper-slide"),i.dataset.id=n,i.innerHTML=`
        <div class="feedback-card">
            <h4>${s}</h4>
            <p>${o}</p>
            <div class="star-rating" data-rating="${Math.round(r)||0}"></div>
        </div>`,t.appendChild(i)})}function m(){const e=document.querySelectorAll(".star-rating");console.log("Найдено star-rating элементов:",e.length),e.forEach(t=>{const n=parseInt(t.dataset.rating,10)||0;console.log("Rating для элемента:",n),new k(t,{readOnly:!0,score:n,starType:"svg",starSize:20,hints:[],callbacks:{initialized:()=>{console.log("Raty инициализирован для контейнера:",t),console.log("SVG элементы:",t.querySelectorAll("svg").length)}}})})}function g(e,t){const n=document.getElementById("pagination-first"),s=document.getElementById("pagination-middle"),o=document.getElementById("pagination-last");if(!n||!s||!o){console.error("Один или несколько элементов пагинации не найдены");return}n.classList.remove("active"),s.classList.remove("active"),o.classList.remove("active"),e===0?n.classList.add("active"):e===t-1?o.classList.add("active"):s.classList.add("active")}function P(e){if(d&&d.destroy(!0,!0),!document.querySelector(".feedback-swiper")){console.error("Контейнер .feedback-swiper не найден");return}d=new M(".feedback-swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,spaceBetween:20,loop:!1,on:{init:function(){console.log("Swiper инициализирован, activeIndex:",this.activeIndex),m(),g(this.activeIndex,e)},slideChange:function(){console.log("Слайд изменён, activeIndex:",this.activeIndex),m(),g(this.activeIndex,e)}}});const n=document.getElementById("pagination-first"),s=document.getElementById("pagination-middle"),o=document.getElementById("pagination-last");if(!n||!s||!o){console.error("Один или несколько элементов пагинации не найдены");return}n.onclick=()=>{console.log("Переход к первому слайду"),d.slideTo(0)},s.onclick=()=>{e>2&&(console.log("Переход к среднему слайду"),d.slideTo(1))},o.onclick=()=>{console.log("Переход к последнему слайду"),d.slideTo(e-1)}}document.addEventListener("DOMContentLoaded",()=>{q().then(e=>{T(e),P(e.length)}).catch(e=>console.error(e))});document.addEventListener("DOMContentLoaded",()=>{var o;const e=document.getElementById("artist-modal");if(!e)return;const t=e.querySelector(".modal-content"),n=e.querySelector(".close-btn");if(!t||!n)return;function s(){e.classList.add("is-hidden"),document.body.classList.remove("no-scroll"),t.innerHTML=""}n.addEventListener("click",s),e.addEventListener("click",r=>{r.target===e&&s()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&s()}),(o=document.querySelector(".gallery"))==null||o.addEventListener("click",r=>{if(r.target.closest(".learn-more-btn")){const f=r.target.closest(".artist-card").dataset.id;$(f)}})});async function $(e){const t=document.getElementById("artist-modal"),n=t==null?void 0:t.querySelector(".modal-content");if(!(!t||!n))try{document.body.classList.add("no-scroll"),t.classList.remove("is-hidden"),n.innerHTML='<span class="loader">Loading...</span>';const s=await fetch(`https://sound-wave.b.goit.study/api/artists/${e}`);if(!s.ok)throw new Error("Failed to fetch artist details");const o=await s.json();n.innerHTML=generateArtistMarkup(o)}catch{n.innerHTML="<p>Error loading artist data.</p>"}}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".burger-btn"),t=document.querySelector(".mobile-menu"),n=document.querySelector(".mobile-close"),s=document.querySelector(".mobile-backdrop"),o=document.querySelector(".header-logo-link");let r=!1;const i=()=>{s.classList.remove("open"),t.classList.remove("open"),document.body.style.overflow=""};e.addEventListener("click",()=>{if(s.classList.add("open"),t.classList.add("open"),document.body.style.overflow="hidden",!r&&o){const c=o.cloneNode(!0);c.classList.add("mobile-logo"),t.prepend(c),r=!0}}),n.addEventListener("click",i),s.addEventListener("click",c=>{c.target===s&&i()}),t.querySelectorAll("a").forEach(c=>{c.addEventListener("click",i)})});
//# sourceMappingURL=index.js.map
